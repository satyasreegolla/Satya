---
title: "PUMAS"
author: "Satya Golla"
date: "12/30/2021"
output: html_document
---


```{r setup}
library(sf)
library(tidyverse)
```


```{r read-puma-ks}
path_name <- "./data"
file_name <- "tl_2021_20_puma10.shp"
path_name                              %>%
  paste(file_name, sep="/")            %>%
  st_read(stringsAsFactors=FALSE)      -> all_puma_ks
head(all_puma_ks)
all_puma_ks                           %>%
     ggplot()                              +
      geom_sf(aes())                    +
      ggtitle("ks-puma")
```

variable in the file 

+ Variables:
  +   "STATEFP10"
  +   "PUMACE10"
  +   "GEOID10"
  +   "NAMELSAD10"
  +   "MTFCC10" 
  +   "FUNCSTAT10" 
  +   "ALAND10"
  +   "AWATER10"
  +   "INTPTLAT10"
  +   "INTPTLON10"
  +   "geometry"


```{r read-puma-mo}
path_name <- "./data"
file_name <- "tl_2021_29_puma10.shp"
path_name                              %>%
  paste(file_name, sep="/")            %>%
  st_read(stringsAsFactors=FALSE)      -> all_puma_mo
head(all_puma_mo)
all_puma_mo                           %>%
     ggplot()                              +
      geom_sf(aes())                    +
      ggtitle("mo-puma")
```


variable in the file 

+ Variables:
  +   "STATEFP10"
  +   "PUMACE10"
  +   "GEOID10"
  +   "NAMELSAD10"
  +   "MTFCC10" 
  +   "FUNCSTAT10" 
  +   "ALAND10"
  +   "AWATER10"
  +   "INTPTLAT10"
  +   "INTPTLON10"
  +   "geometry"

```{r combine-pumas}
all_puma_ks                %>%
  bind_rows(all_puma_mo)                %>%
 ggplot()                               +
      geom_sf(aes())                    +
      ggtitle("mo-ks-puma")  
  
```



```{r read-Community-Districts}
file_name <- "Community_District.shp"
path_name                              %>%
  paste(file_name, sep="/")            %>%
  st_read(stringsAsFactors=FALSE)      -> Community_Districts
head(Community_Districts)
Community_Districts                  %>%
  ggplot()                              +
      geom_sf(aes())                    +
      ggtitle("Community_Districts")
Community_Districts %>%
  st_transform(crs=st_crs(all_counties)) -> cd
```

```{r intersect-puma-Community-Districts}
all_puma_ks                             %>%
   bind_rows(all_puma_mo)               %>%   
st_intersects( cd, sparse=FALSE) -> intersect_matrix
 print(intersect_matrix)
 ggplot(data=cd, aes()) +
        geom_sf(fill="lightgreen", col="darkgreen") +
        geom_sf(data=cd[intersect_matrix, ], fill="pink", col="darkred") 
```

